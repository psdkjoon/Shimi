<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุขุฒููู ฺูุงุฑ ฺฏุฒููโุง</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f4f4;
            color: #333;
            line-height: 1.6;
            margin: 20px;
            direction: rtl;
            text-align: right;
        }
        .container {
            max-width: 800px;
            margin: 30px auto;
            background: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        h1 {
            color: #0056b3;
            margin-bottom: 25px;
        }
        .question-box {
            background-color: #e9f7ff;
            border: 1px solid #cce7ff;
            border-radius: 6px;
            padding: 25px;
            margin-bottom: 20px;
            min-height: 180px; /* Adjusted for better spacing */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        .question-text {
            font-size: 1.5em;
            font-weight: bold;
            color: #007bff;
            margin-bottom: 25px;
            text-align: center;
        }
        .options-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px; /* Space between buttons */
            margin-bottom: 20px;
        }
        .option-button {
            background-color: #f0f0f0;
            color: #333;
            padding: 12px 25px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s ease, border-color 0.3s ease;
            width: 45%; /* Two columns layout */
            box-sizing: border-box; /* Include padding and border in width */
            text-align: right; /* Text align right for RTL */
        }
        .option-button:hover {
            background-color: #e0e0e0;
        }
        .option-button.selected {
            border-color: #007bff;
            background-color: #d1ecf1;
        }
        .option-button.correct {
            background-color: #d4edda;
            border-color: #28a745;
            color: #155724;
            font-weight: bold;
        }
        .option-button.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
            font-weight: bold;
        }
        .buttons-action {
            margin-top: 20px;
        }
        button {
            background-color: #28a745;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin: 0 10px;
        }
        button:hover {
            background-color: #218838;
        }
        button#checkAnswer {
            background-color: #007bff;
        }
        button#checkAnswer:hover {
            background-color: #0056b3;
        }
        button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        .feedback {
            margin-top: 15px;
            font-size: 1.1em;
            font-weight: bold;
        }
        .feedback.correct {
            color: #28a745;
        }
        .feedback.incorrect {
            color: #dc3545;
        }
        .progress-bar-container {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 5px;
            height: 20px;
            margin-top: 20px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            width: 0%;
            background-color: #4CAF50;
            border-radius: 5px;
            text-align: center;
            color: white;
            line-height: 20px;
            transition: width 0.5s ease-in-out;
        }
        sup, sub {
            vertical-align: super;
            font-size: smaller;
        }
        sub {
            vertical-align: sub;
        }
        .equation {
            font-family: 'Courier New', Courier, monospace;
            background-color: #f0f0f0;
            padding: 8px;
            border-left: 4px solid #0056b3;
            margin-top: 10px;
            display: inline-block;
            overflow-x: auto;
            max-width: 100%;
            direction: ltr; /* Ensure equations display LTR */
            text-align: left; /* Ensure equations display LTR */
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ุขุฒููู ฺูุงุฑ ฺฏุฒููโุง ุดู ู ูุฒฺฉ</h1>
        <p>ฺฉ ุงุฒ ฺฏุฒููโูุง ุฑุง ุงูุชุฎุงุจ ฺฉุฑุฏู ู "ุจุฑุฑุณ ุฌูุงุจ" ุฑุง ุจุฒูุฏ.</p>

        <div class="question-box">
            <div id="questionDisplay" class="question-text">ุจุฑุง ุดุฑูุนุ ุฏฺฉูู "ุณูุงู ุจุนุฏ" ุฑุง ุจุฒูุฏ.</div>
            <div id="optionsContainer" class="options-container">
                </div>
            <div id="feedbackDisplay" class="feedback"></div>
        </div>

        <div class="buttons-action">
            <button id="checkAnswer">ุจุฑุฑุณ ุฌูุงุจ</button>
            <button id="nextQuestion">ุณูุงู ุจุนุฏ</button>
        </div>

        <div class="progress-bar-container">
            <div id="progressBar" class="progress-bar">0%</div>
        </div>
    </div>

    <script>
        const quizData = [
            {
                question: "Al<sub>2</sub>O<sub>3</sub> ุจู ฺู ูุงู ุดูุงุฎุชู ูโุดูุฏุ",
                options: ["ููุงุชุช", "ููุฒุช", "ุจูฺฉุณุช", "ุณูููุงุช ุขูููููู"],
                answer: "ุจูฺฉุณุช"
            },
            {
                question: "ูุงู ุฑุงุฌ Fe<sub>2</sub>O<sub>3</sub> ฺุณุชุ",
                options: ["ูพุฑุช", "ููุงุชุช", "ูฺฏูุชุช", "ุณุฏุฑุช"],
                answer: "ููุงุชุช"
            },
            {
                question: "ฺฉุฏุงู ฺฉ ุฌุฒู ุชููุฏุงุช ุงุตู ุงุญุชุฑุงู ฺฉุงูู ุฐุบุงู ุณูฺฏ ูุณุชุ",
                options: ["CO<sub>2</sub>", "H<sub>2</sub>O", "SO<sub>2</sub>", "O<sub>2</sub>"],
                answer: "O<sub>2</sub>"
            },
            {
                question: "ุงฺฉุณุฏ ููุฒุงุช ุนูุฏุชุงู ฺู ุฎุงุตุช ุฏุงุฑูุฏุ",
                options: ["ุงุณุฏ", "ุฎูุซ", "ุจุงุฒ", "ุขูููุชุฑฺฉ"],
                answer: "ุจุงุฒ"
            },
            {
                question: "ุงฺฉุณุฏ ูุงููุฒุงุช ุนูุฏุชุงู ฺู ุฎุงุตุช ุฏุงุฑูุฏุ",
                options: ["ุจุงุฒ", "ุฎูุซ", "ุงุณุฏ", "ุขูููุชุฑฺฉ"],
                answer: "ุงุณุฏ"
            },
            {
                question: "ุณุฑฺฉู ูุนูููุงู ุญุงู ฺูุฏ ุฏุฑุตุฏ ุงุณุชฺฉ ุงุณุฏ ุงุณุชุ",
                options: ["ฑฐ ุฏุฑุตุฏ", "ต ุฏุฑุตุฏ", "ตฐ ุฏุฑุตุฏ", "ฒ ุฏุฑุตุฏ"],
                answer: "ต ุฏุฑุตุฏ"
            },
            {
                question: "ฺฉุฏุงู ุนูุตุฑ ุฏุฑ ุดุฑุจุชโูุง ุถุฏ ุงุณุฏ ูุนุฏู (ุขูุชโุงุณุฏ) ฺฉุงุฑุจุฑุฏ ุฏุงุฑุฏุ",
                options: ["ูพุชุงุณู", "ุณุฏู", "ฺฉูุณู", "ููุฒู"],
                answer: "ููุฒู"
            },
            {
                question: "ูุชูู ุณูููุงุช ุฏุฑ ุขุจ ฺู ุฑูุชุงุฑ ุงุฒ ุฎูุฏ ูุดุงู ูโุฏูุฏุ",
                options: ["ฺฏุฑูุงฺฏุฑ ุงุณุช", "ฺฏุฑูุงุฏู ุงุณุช", "ูฺ ุชุบุฑ ุฏุฑ ุฏูุง ุงุฌุงุฏ ููโฺฉูุฏ", "ูุญููู ููโุดูุฏ"],
                answer: "ฺฏุฑูุงุฏู ุงุณุช"
            },
            {
                question: "ฺฉุฏุงู ฺฉ ุงุฒ ุชุฑฺฉุจุงุช ุฒุฑ ุฏุฑ ุขุจ ุจุณุงุฑ ูุญููู ุงุณุชุ",
                options: ["ููุฑู ฺฉูุฑุฏ", "ุจุงุฑู ุณูููุงุช", "ุณุฏู ฺฉูุฑุฏ", "ฺฉูุณู ุณูููุงุช"],
                answer: "ุณุฏู ฺฉูุฑุฏ"
            },
            {
                question: "ูุฑุงูุงูโุชุฑู ูู ููู ุฏุฑ ุขุจ ุงูุงููุณโูุง (ู ุงุบูุจ ุขุจโูุง ุทุจุน) ฺฉุฏุงู ุงุณุชุ",
                options: ["ุณูููุงุช", "ฺฉุฑุจูุงุช", "ฺฉูุฑุฏ", "ูุชุฑุงุช"],
                answer: "ฺฉูุฑุฏ"
            },
            {
                question: "ูุชุฌู ูุงฺฉูุด NaCl<sub>(s)</sub> + AgNO<sub>3(s)</sub> (ุจุง H<sub>2</sub>O ุจู ุนููุงู ฺฉุงุชุงูุฒูุฑ) ฺุณุชุ",
                options: ["AgNO<sub>3(aq)</sub> + NaCl<sub>(s)</sub>", "AgCl<sub>(s)</sub> + NaNO<sub>3(aq)</sub>", "NaAg<sub>(s)</sub> + ClNO<sub>3(aq)</sub>", "ูฺ ูุงฺฉูุด ุฑุฎ ููโุฏูุฏ"],
                answer: "AgCl<sub>(s)</sub> + NaNO<sub>3(aq)</sub>"
            },
            {
                question: "ูุญุตููุงุช ุงุตู ูุงฺฉูุด 2Na<sub>3</sub>PO<sub>4(s)</sub> + 3CaCl<sub>2(s)</sub> (ุจุง H<sub>2</sub>O ุจู ุนููุงู ฺฉุงุชุงูุฒูุฑ) ฺฉุฏุงููุฏุ",
                options: ["Ca<sub>3</sub>(PO<sub>4</sub>)<sub>2(aq)</sub> + 6NaCl<sub>(s)</sub>", "Ca<sub>3</sub>(PO<sub>4</sub>)<sub>2(s)</sub> + 6NaCl<sub>(aq)</sub>", "Na<sub>2</sub>PO<sub>4(s)</sub> + CaCl<sub>2(aq)</sub>", "Ca(OH)<sub>2(s)</sub> + NaCl<sub>(aq)</sub>"],
                answer: "Ca<sub>3</sub>(PO<sub>4</sub>)<sub>2(s)</sub> + 6NaCl<sub>(aq)</sub>"
            },
            {
                question: "ุชุฑุชุจ ุตุญุญ ุงููุงุฌ ุงูฺฉุชุฑููุบูุงุทุณ ุงุฒ ููโุชุฑู ุจู ุถุนูโุชุฑู (ุงูุฑฺ ุจุดุชุฑ ุจู ฺฉูุชุฑ) ฺฉุฏุงู ุงุณุชุ",
                options: ["ฺฏุงูุงุ ุงฺฉุณุ ูุฑุงุจููุดุ ูุฑุฆุ ูุฑูุณุฑุฎุ ุฑุฒููุฌโูุงุ ุฑุงุฏู", "ุฑุงุฏูุ ุฑุฒููุฌโูุงุ ูุฑูุณุฑุฎุ ูุฑุฆุ ูุฑุงุจููุดุ ุงฺฉุณุ ฺฏุงูุง", "ฺฏุงูุงุ ูุฑุงุจููุดุ ุงฺฉุณุ ูุฑุฆุ ูุฑูุณุฑุฎุ ุฑุฒููุฌโูุงุ ุฑุงุฏู", "ุงฺฉุณุ ฺฏุงูุงุ ูุฑุงุจููุดุ ูุฑุฆุ ูุฑูุณุฑุฎุ ุฑุฒููุฌโูุงุ ุฑุงุฏู"],
                answer: "ฺฏุงูุงุ ุงฺฉุณุ ูุฑุงุจููุดุ ูุฑุฆุ ูุฑูุณุฑุฎุ ุฑุฒููุฌโูุงุ ุฑุงุฏู"
            },
            {
                question: "ุชูุฑุจุงู ูุฒู ุงุชู ูพุฑูุชูู ฺูุฏุฑ ุงุณุชุ",
                options: ["ฑ.ฐฐธท", "ฐ.ฐฐฐต", "ฑ.ฐฐทณ", "ฑ.ฐฐนถ"],
                answer: "ฑ.ฐฐทณ"
            },
            {
                question: "ุชูุฑุจุงู ูุฒู ุงุชู ููุชุฑูู ฺูุฏุฑ ุงุณุชุ",
                options: ["ฑ.ฐฐทณ", "ฑ.ฐฐธท", "ฐ.ฐฐฐต", "ฑ.ฐฑฐธ"],
                answer: "ฑ.ฐฐธท"
            },
            {
                question: "ุญุฑฺฉุช ุงูฺฉุชุฑูู ุงุฒ ูุงู ุงูุฑฺ ถ ุจู ูุงู ฒุ ฺู ุฑูฺฏ ุงุฒ ููุฑ ุฑุง ุชููุฏ ูโฺฉูุฏุ",
                options: ["ูุฑูุฒ", "ุณุจุฒ", "ุขุจ", "ุจููุด"],
                answer: "ุจููุด"
            },
            {
                question: "ุญุฑฺฉุช ุงูฺฉุชุฑูู ุงุฒ ูุงู ุงูุฑฺ ต ุจู ูุงู ฒุ ฺู ุฑูฺฏ ุงุฒ ููุฑ ุฑุง ุชููุฏ ูโฺฉูุฏุ",
                options: ["ุจููุด", "ุณุจุฒ", "ุขุจ", "ูุฑูุฒ"],
                answer: "ุขุจ"
            },
            {
                question: "ุญุฑฺฉุช ุงูฺฉุชุฑูู ุงุฒ ูุงู ุงูุฑฺ ด ุจู ูุงู ฒุ ฺู ุฑูฺฏ ุงุฒ ููุฑ ุฑุง ุชููุฏ ูโฺฉูุฏุ",
                options: ["ูุฑูุฒ", "ุณุจุฒ", "ุขุจ", "ุจููุด"],
                answer: "ุณุจุฒ"
            },
            {
                question: "ุญุฑฺฉุช ุงูฺฉุชุฑูู ุงุฒ ูุงู ุงูุฑฺ ณ ุจู ูุงู ฒุ ฺู ุฑูฺฏ ุงุฒ ููุฑ ุฑุง ุชููุฏ ูโฺฉูุฏุ",
                options: ["ุณุจุฒ", "ุขุจ", "ูุฑูุฒ", "ุจููุด"],
                answer: "ูุฑูุฒ"
            },
            {
                question: "ฺฉุฏุงู ุงุฒูุชููพ ุงูุฑุงููู ุฏุฑ ุฑุงฺฉุชูุฑูุง ูุณุชูโุง ุจู ุนููุงู ุณูุฎุช ุงุตู ุงุณุชูุงุฏู ูโุดูุฏุ",
                options: ["ุงูุฑุงููู ฒณธ", "ุงูุฑุงููู ฒณด", "ุงูุฑุงููู ฒณต", "ุงูุฑุงููู ฒณน"],
                answer: "ุงูุฑุงููู ฒณต"
            },
            {
                question: "ูุฒุงู ูุฑุงูุงู ุงูุฑุงููู ฒณต ุฏุฑ ุงูุฑุงููู ุทุจุน ฺูุฏุฑ ุงุณุชุ",
                options: ["ุจุดุชุฑ ุงุฒ นฐ ุฏุฑุตุฏ", "ุญุฏูุฏ ท ุฏุฑุตุฏ", "ฺฉูุชุฑ ุงุฒ ฐ.ท ุฏุฑุตุฏ", "ุจู ฑ ุชุง ฒ ุฏุฑุตุฏ"],
                answer: "ฺฉูุชุฑ ุงุฒ ฐ.ท ุฏุฑุตุฏ"
            },
            {
                question: "ฺูุฏ ุนูุตุฑ ุทุจุน ู ฺูุฏ ุนูุตุฑ ุณุงุฎุชฺฏ (ูุตููุน) ุดูุงุฎุชู ุดุฏู ุงุณุชุ",
                options: ["นฒ ุทุจุน ู ฒถ ุณุงุฎุชฺฏ", "ฒถ ุทุจุน ู นฒ ุณุงุฎุชฺฏ", "ฑฑธ ุทุจุน ู ุตูุฑ ุณุงุฎุชฺฏ", "ธฐ ุทุจุน ู ณธ ุณุงุฎุชฺฏ"],
                answer: "นฒ ุทุจุน ู ฒถ ุณุงุฎุชฺฏ"
            },
            {
                question: "ูุงู ุฑุงุฌ ุญูุงู ููุฑุฏ ุงุณุชูุงุฏู ุฏุฑ ุจุฑุฎ ุฑูฺฏโูุง ฺุณุชุ",
                options: ["ูุชุงููู", "ุงุณุชูู", "ูฺฏุฒุงู", "ุขุจ"],
                answer: "ูฺฏุฒุงู"
            },
            {
                question: "ูุฏุฑูฺู ุจุง ุงุชุตุงู ุจู ฺฉุฏุงู ฺฉ ุงุฒ ุนูุงุตุฑ ุฒุฑุ **ูพููุฏ ูุฏุฑูฺู** ูู ุงุฌุงุฏ ูโฺฉูุฏุ",
                options: ["C, H, S", "F, N, O", "P, S, Cl", "Na, Mg, Al"],
                answer: "F, N, O"
            },
            {
                question: "ูู ูุฏุฑูฺฉุณุฏ (HO) ฺู ุจุงุฑ ุฏุงุฑุฏุ",
                options: ["ฺฉ ุจุงุฑ ูุซุจุช", "ุฎูุซ", "ุฏู ุจุงุฑ ููู", "ฺฉ ุจุงุฑ ููู"],
                answer: "ฺฉ ุจุงุฑ ููู"
            },
            {
                question: "ูู ุขููููู (NH<sub>4</sub>) ฺู ุจุงุฑ ุฏุงุฑุฏุ",
                options: ["ฺฉ ุจุงุฑ ูุซุจุช", "ฺฉ ุจุงุฑ ููู", "ุฏู ุจุงุฑ ูุซุจุช", "ุฎูุซ"],
                answer: "ฺฉ ุจุงุฑ ูุซุจุช"
            },
            {
                question: "ูู ููฺฏูุงุช (MnO<sub>4</sub>) ฺู ุจุงุฑ ุฏุงุฑุฏุ",
                options: ["ฺฉ ุจุงุฑ ููู", "ุฏู ุจุงุฑ ูุซุจุช", "ุฏู ุจุงุฑ ููู", "ุณู ุจุงุฑ ููู"],
                answer: "ุฏู ุจุงุฑ ููู"
            },
            {
                question: "ูู ูพุฑููฺฏูุงุช (MnO<sub>4</sub>) ฺู ุจุงุฑ ุฏุงุฑุฏุ",
                options: ["ุฏู ุจุงุฑ ููู", "ฺฉ ุจุงุฑ ูุซุจุช", "ฺฉ ุจุงุฑ ููู", "ุณู ุจุงุฑ ููู"],
                answer: "ฺฉ ุจุงุฑ ููู"
            },
            {
                question: "ูู ฺฉุฑุจูุงุช (CO<sub>3</sub>) ฺู ุจุงุฑ ุฏุงุฑุฏุ",
                options: ["ฺฉ ุจุงุฑ ููู", "ุฏู ุจุงุฑ ููู", "ฺฉ ุจุงุฑ ูุซุจุช", "ุฎูุซ"],
                answer: "ุฏู ุจุงุฑ ููู"
            },
            {
                question: "ูู ุณูููุงุช (SO<sub>4</sub>) ฺู ุจุงุฑ ุฏุงุฑุฏุ",
                options: ["ฺฉ ุจุงุฑ ููู", "ุฏู ุจุงุฑ ููู", "ฺฉ ุจุงุฑ ูุซุจุช", "ุฏู ุจุงุฑ ูุซุจุช"],
                answer: "ุฏู ุจุงุฑ ููู"
            },
            {
                question: "ูู ูุชุฑุงุช (NO<sub>3</sub>) ฺู ุจุงุฑ ุฏุงุฑุฏุ",
                options: ["ุฏู ุจุงุฑ ููู", "ฺฉ ุจุงุฑ ูุซุจุช", "ฺฉ ุจุงุฑ ููู", "ุฎูุซ"],
                answer: "ฺฉ ุจุงุฑ ููู"
            },
            {
                question: "ฺฉุฏุงู ูุฑุญูู ุฏุฑ ุชูู ููุฒู ุงุฒ ุขุจุ ููุฌุฑ ุจู ุชุดฺฉู ฺฉ ููฺฉ ูุญููู ุฏุฑ ุขุจ ูโุดูุฏุ",
                options: [
                    "ุงูุฒูุฏู ูุฏุฑูฺฉุณุฏ ุจุฑุง ุฑุณูุจ ุฏุงุฏู Mg(OH)<sub>2</sub>",
                    "ุงูฺฉุชุฑููุฒ ุจุฑุง ุฌุฏุง ฺฉุฑุฏู ฺฉูุฑ",
                    "ุงุถุงูู ฺฉุฑุฏู ูุฏุฑูฺฉูุฑฺฉ ุงุณุฏ ุจู Mg(OH)<sub>2</sub>",
                    "ุงูุชูุงู ุฌุฑุงู ุจุฑู ุจู ูุญููู"
                ],
                answer: "ุงุถุงูู ฺฉุฑุฏู ูุฏุฑูฺฉูุฑฺฉ ุงุณุฏ ุจู Mg(OH)<sub>2</sub>"
            }
        ];

        let availableQuestions = [...quizData]; // Copy of all questions
        let currentQuestion = null;
        let selectedOption = null;
        let totalQuestionsAnswered = 0;

        const questionDisplay = document.getElementById('questionDisplay');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackDisplay = document.getElementById('feedbackDisplay');
        const checkAnswerBtn = document.getElementById('checkAnswer');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const progressBar = document.getElementById('progressBar');

        function normalizeText(text) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = text;
            return tempDiv.textContent.replace(/\s+/g, ' ').trim().toLowerCase();
        }

        function displayNextQuestion() {
            if (availableQuestions.length === 0) {
                questionDisplay.innerHTML = 'ุชุจุฑฺฉ! ๐ ุชูุงู ุณูุงูุงุช ุฑุง ูพุงุณุฎ ุฏุงุฏุฏ!';
                optionsContainer.innerHTML = '';
                feedbackDisplay.innerHTML = '';
                checkAnswerBtn.style.display = 'none';
                nextQuestionBtn.textContent = 'ุดุฑูุน ูุฌุฏุฏ ุขุฒููู';
                return;
            }

            const randomIndex = Math.floor(Math.random() * availableQuestions.length);
            currentQuestion = availableQuestions[randomIndex];

            questionDisplay.innerHTML = currentQuestion.question;
            optionsContainer.innerHTML = ''; // Clear previous options
            selectedOption = null;
            feedbackDisplay.innerHTML = ''; // Clear feedback
            checkAnswerBtn.disabled = true; // Disable check until an option is selected
            nextQuestionBtn.disabled = false; // Enable next button initially

            currentQuestion.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.classList.add('option-button');
                button.innerHTML = option;
                button.dataset.index = index; // Store original index for selection
                button.addEventListener('click', () => selectOption(button, option));
                optionsContainer.appendChild(button);
            });

            updateProgressBar();
        }

        function selectOption(button, optionText) {
            // Remove 'selected' class from all buttons
            document.querySelectorAll('.option-button').forEach(btn => {
                btn.classList.remove('selected');
                btn.classList.remove('correct'); // Clear previous feedback colors
                btn.classList.remove('incorrect'); // Clear previous feedback colors
            });
            
            button.classList.add('selected'); // Add 'selected' class to the clicked button
            selectedOption = optionText;
            checkAnswerBtn.disabled = false; // Enable check button once an option is selected
            feedbackDisplay.innerHTML = ''; // Clear any previous feedback
        }

        function checkAnswer() {
            if (selectedOption === null) {
                feedbackDisplay.innerHTML = 'ูุทูุงู ฺฉ ฺฏุฒูู ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ.';
                feedbackDisplay.className = 'feedback incorrect';
                return;
            }

            // Disable all option buttons after checking
            document.querySelectorAll('.option-button').forEach(btn => {
                btn.disabled = true;
            });

            const selectedButton = Array.from(document.querySelectorAll('.option-button')).find(
                button => normalizeText(button.innerHTML) === normalizeText(selectedOption)
            );

            if (normalizeText(selectedOption) === normalizeText(currentQuestion.answer)) {
                feedbackDisplay.innerHTML = 'ุฏุฑุณุช ุจูุฏ! โ';
                feedbackDisplay.className = 'feedback correct';
                selectedButton.classList.add('correct');
                // Remove the question from available questions only if answered correctly
                availableQuestions = availableQuestions.filter(q => q !== currentQuestion);
            } else {
                feedbackDisplay.innerHTML = 'ุงุดุชุจุงู ุจูุฏ. โ';
                feedbackDisplay.className = 'feedback incorrect';
                selectedButton.classList.add('incorrect');
                // Show the correct answer
                Array.from(document.querySelectorAll('.option-button')).forEach(btn => {
                    if (normalizeText(btn.innerHTML) === normalizeText(currentQuestion.answer)) {
                        btn.classList.add('correct');
                    }
                });
            }
            checkAnswerBtn.disabled = true; // Disable check button after checking
            nextQuestionBtn.disabled = false; // Enable next button
            totalQuestionsAnswered++; // Increment count regardless of correctness for progress bar
            updateProgressBar();
        }

        function updateProgressBar() {
            const totalQuestions = quizData.length;
            const progress = ((totalQuestions - availableQuestions.length) / totalQuestions) * 100;
            progressBar.style.width = progress + '%';
            progressBar.textContent = Math.round(progress) + '%';

            if (availableQuestions.length === 0) {
                progressBar.textContent = 'ฑฐฐ%';
                progressBar.style.width = '100%';
            }
        }

        // Event Listeners
        checkAnswerBtn.addEventListener('click', checkAnswer);
        nextQuestionBtn.addEventListener('click', () => {
            if (availableQuestions.length === 0 && nextQuestionBtn.textContent === 'ุดุฑูุน ูุฌุฏุฏ ุขุฒููู') {
                // Reset quiz
                availableQuestions = [...quizData];
                totalQuestionsAnswered = 0;
                checkAnswerBtn.style.display = 'inline-block';
                nextQuestionBtn.textContent = 'ุณูุงู ุจุนุฏ';
            }
            // Re-enable option buttons before displaying next question
            document.querySelectorAll('.option-button').forEach(btn => {
                btn.disabled = false;
            });
            displayNextQuestion();
        });

        // Initial load
        displayNextQuestion();
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¢Ø²Ù…ÙˆÙ† Ø­ÙØ¸ Ú©Ø±Ø¯Ù† - ØªØ¹Ø§Ù…Ù„ÛŒ</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f4f4;
            color: #333;
            line-height: 1.6;
            margin: 20px;
            direction: rtl;
            text-align: right;
        }
        .container {
            max-width: 700px;
            margin: 30px auto;
            background: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        h1 {
            color: #0056b3;
            margin-bottom: 25px;
        }
        .qa-box {
            background-color: #e9f7ff;
            border: 1px solid #cce7ff;
            border-radius: 6px;
            padding: 25px;
            margin-bottom: 20px;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .question-text {
            font-size: 1.4em;
            font-weight: bold;
            color: #007bff;
            margin-bottom: 20px;
            text-align: center;
        }
        input[type="text"] {
            width: 80%;
            padding: 10px 15px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1.1em;
            text-align: center; /* Center align input text */
        }
        .buttons {
            margin-top: 15px;
        }
        button {
            background-color: #28a745;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            font-size: 1em;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin: 0 5px;
        }
        button:hover {
            background-color: #218838;
        }
        button#checkAnswer {
            background-color: #007bff;
        }
        button#checkAnswer:hover {
            background-color: #0056b3;
        }
        button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        .feedback {
            margin-top: 15px;
            font-size: 1.1em;
            font-weight: bold;
        }
        .feedback.correct {
            color: #28a745;
        }
        .feedback.incorrect {
            color: #dc3545;
        }
        .correct-answer-display {
            margin-top: 10px;
            font-size: 1em;
            color: #0056b3;
            background-color: #f0f8ff;
            padding: 8px;
            border-radius: 4px;
            display: none;
        }
        .progress-bar-container {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 5px;
            height: 20px;
            margin-top: 20px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            width: 0%;
            background-color: #4CAF50;
            border-radius: 5px;
            text-align: center;
            color: white;
            line-height: 20px;
            transition: width 0.5s ease-in-out;
        }
        sup, sub {
            vertical-align: super;
            font-size: smaller;
        }
        sub {
            vertical-align: sub;
        }
        .equation {
            font-family: 'Courier New', Courier, monospace;
            background-color: #f0f0f0;
            padding: 8px;
            border-left: 4px solid #0056b3;
            margin-top: 10px;
            display: inline-block;
            overflow-x: auto;
            max-width: 100%; /* Ensure it fits in the box */
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Ø¢Ø²Ù…ÙˆÙ† Ø­ÙØ¸ Ú©Ø±Ø¯Ù† - Ø´ÛŒÙ…ÛŒ Ùˆ ÙÛŒØ²ÛŒÚ©</h1>
        <p>Ø¬ÙˆØ§Ø¨ Ø±Ø§ ØªØ§ÛŒÙ¾ Ú©Ø±Ø¯Ù‡ Ùˆ Ø¯Ú©Ù…Ù‡ "Ø¨Ø±Ø±Ø³ÛŒ Ø¬ÙˆØ§Ø¨" Ø±Ø§ Ø¨Ø²Ù†ÛŒØ¯. ÙˆÙ‚ØªÛŒ Ø³ÙˆØ§Ù„Ø§Øª ØªÙ…Ø§Ù… Ø´Ø¯ØŒ Ø¯Ú©Ù…Ù‡ "Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯" Ø¸Ø§Ù‡Ø± Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p>

        <div class="qa-box">
            <div id="questionDisplay" class="question-text">Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ØŒ Ø¯Ú©Ù…Ù‡ "Ø³ÙˆØ§Ù„ Ø¨Ø¹Ø¯ÛŒ" Ø±Ø§ Ø¨Ø²Ù†ÛŒØ¯.</div>
            <input type="text" id="answerInput" placeholder="Ø¬ÙˆØ§Ø¨ Ø®ÙˆØ¯ Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ ØªØ§ÛŒÙ¾ Ú©Ù†ÛŒØ¯">
            <div id="feedbackDisplay" class="feedback"></div>
            <div id="correctAnswerDisplay" class="correct-answer-display"></div>
        </div>

        <div class="buttons">
            <button id="checkAnswer">Ø¨Ø±Ø±Ø³ÛŒ Ø¬ÙˆØ§Ø¨</button>
            <button id="nextQuestion">Ø³ÙˆØ§Ù„ Ø¨Ø¹Ø¯ÛŒ</button>
        </div>

        <div class="progress-bar-container">
            <div id="progressBar" class="progress-bar">0%</div>
        </div>
    </div>

    <script>
        const qaPairs = [
            { question: "Ù†Ø§Ù… Al<sub>2</sub>O<sub>3</sub> Ú†ÛŒØ³ØªØŸ", answer: "Ø¨ÙˆÚ©Ø³ÛŒØª" },
            { question: "Ù†Ø§Ù… Fe<sub>2</sub>O<sub>3</sub> Ú†ÛŒØ³ØªØŸ", answer: "Ù‡Ù…Ø§ØªÛŒØª" },
            { question: "ØªÙˆÙ„ÛŒØ¯Ø§Øª Ø°ØºØ§Ù„ Ø³Ù†Ú¯ Ø¯Ø± Ù‡Ù†Ú¯Ø§Ù… Ø§Ø­ØªØ±Ø§Ù‚ Ú†ÛŒØ³ØªØŸ", answer: "CO, CO2, H2O, SO2" },
            { question: "Ø§Ú©Ø³ÛŒØ¯ ÙÙ„Ø² Ú†Ù‡ Ø®Ø§ØµÛŒØªÛŒ Ø¯Ø§Ø±Ø¯ØŸ", answer: "Ø¨Ø§Ø²ÛŒ Ø§Ø³Øª" },
            { question: "Ø§Ú©Ø³ÛŒØ¯ Ù†Ø§ÙÙ„Ø² Ú†Ù‡ Ø®Ø§ØµÛŒØªÛŒ Ø¯Ø§Ø±Ø¯ØŸ", answer: "Ø§Ø³ÛŒØ¯ÛŒ Ø§Ø³Øª" },
            { question: "Ø³Ø±Ú©Ù‡ Ú†Ù†Ø¯ Ø¯Ø±ØµØ¯ Ø§Ø³ØªÛŒÚ© Ø§Ø³ÛŒØ¯ Ø¯Ø§Ø±Ø¯ØŸ", answer: "Ù¾Ù†Ø¬ Ø¯Ø±ØµØ¯" },
            { question: "Ú©Ø¯Ø§Ù… Ø¹Ù†ØµØ± Ø¯Ø± Ø´Ø±Ø¨Øª Ù…Ø¹Ø¯Ù‡ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯ØŸ", answer: "Ù…Ù†ÛŒØ²ÛŒÙ…" },
            { question: "Ù„ÛŒØªÛŒÙˆÙ… Ø³ÙˆÙ„ÙØ§Øª Ø¯Ø± Ø¢Ø¨ Ú†Ù‡ Ø®Ø§ØµÛŒØªÛŒ Ø¯Ø§Ø±Ø¯ØŸ", answer: "Ú¯Ø±Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª" },
            { question: "Ú©Ø¯Ø§Ù… ØªØ±Ú©ÛŒØ¨Ø§Øª Ø¯Ø± Ø¢Ø¨ Ú©Ù… Ù…Ø­Ù„ÙˆÙ„ Ù‡Ø³ØªÙ†Ø¯ØŸ", answer: "Ù†Ù‚Ø±Ù‡ Ú©Ù„Ø±ÛŒØ¯ØŒ Ø¨Ø§Ø±ÛŒÙ… Ø³ÙˆÙ„ÙØ§ØªØŒ Ú©Ù„Ø³ÛŒÙ… Ø³ÙˆÙ„ÙØ§Øª Ùˆ Ù…Ù†ÛŒØ²ÛŒÙ… Ù‡ÛŒØ¯Ø±ÙˆÚ©Ø³ÛŒØ¯" },
            { question: "ÙØ±Ø§ÙˆØ§Ù†â€ŒØªØ±ÛŒÙ† ÛŒÙˆÙ† Ø¯Ø± Ø¢Ø¨ Ú†ÛŒØ³ØªØŸ", answer: "Cl-" },
            { question: "Ù…Ø¹Ø§Ø¯Ù„Ù‡ ÙˆØ§Ú©Ù†Ø´ NaCl Ø¨Ø§ AgNO<sub>3</sub> Ú†ÛŒØ³ØªØŸ (Ø¨Ø§ H<sub>2</sub>O Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ú©Ø§ØªØ§Ù„ÛŒØ²ÙˆØ±)", answer: 'NaCl<sub>(s)</sub> + AgNO<sub>3(s)</sub> &rarr; AgCl<sub>(s)</sub> + NaNO<sub>3(aq)</sub>' },
            { question: "Ù…Ø¹Ø§Ø¯Ù„Ù‡ ÙˆØ§Ú©Ù†Ø´ 2Na<sub>3</sub>PO<sub>4</sub> Ø¨Ø§ 3CaCl<sub>2</sub> Ú†ÛŒØ³ØªØŸ (Ø¨Ø§ H<sub>2</sub>O Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ú©Ø§ØªØ§Ù„ÛŒØ²ÙˆØ±)", answer: '2Na<sub>3</sub>PO<sub>4(s)</sub> + 3CaCl<sub>2(s)</sub> &rarr; Ca<sub>3</sub>(PO<sub>4</sub>)<sub>2(s)</sub> + 6NaCl<sub>(aq)</sub>' },
            { question: "ØªØ±ØªÛŒØ¨ Ø§Ù…ÙˆØ§Ø¬ Ø§Ø² Ù‚ÙˆÛŒ Ø¨Ù‡ Ø¶Ø¹ÛŒÙ Ú†ÛŒØ³ØªØŸ", answer: "Ú¯Ø§Ù…Ø§ØŒ Ø§ÛŒÚ©Ø³ØŒ ÙØ±Ø§Ø¨Ù†ÙØ´ØŒ Ù…Ø±Ø¦ÛŒØŒ ÙØ±ÙˆØ³Ø±Ø®ØŒ Ø±ÛŒØ²Ù…ÙˆØ¬â€ŒÙ‡Ø§ØŒ Ø±Ø§Ø¯ÛŒÙˆÛŒÛŒ" },
            { question: "ÙˆØ²Ù† Ù¾Ø±ÙˆØªÙˆÙ† Ú†Ù‚Ø¯Ø± Ø§Ø³ØªØŸ", answer: "Û±.Û°Û°Û·Û³" },
            { question: "ÙˆØ²Ù† Ù†ÙˆØªØ±ÙˆÙ† Ú†Ù‚Ø¯Ø± Ø§Ø³ØªØŸ", answer: "Û±.Û°Û°Û¸Û·" },
            { question: "Ø­Ø±Ú©Øª Ø§Ù„Ú©ØªØ±ÙˆÙ† Ø§Ø² Ù„Ø§ÛŒÙ‡ Û¶ Ø¨Ù‡ Ù„Ø§ÛŒÙ‡ Û² Ú†Ù‡ Ø±Ù†Ú¯ÛŒ Ù…ÛŒâ€ŒØ³Ø§Ø²Ø¯ØŸ", answer: "Ø¨Ù†ÙØ´" },
            { question: "Ø­Ø±Ú©Øª Ø§Ù„Ú©ØªØ±ÙˆÙ† Ø§Ø² Ù„Ø§ÛŒÙ‡ Ûµ Ø¨Ù‡ Ù„Ø§ÛŒÙ‡ Û² Ú†Ù‡ Ø±Ù†Ú¯ÛŒ Ù…ÛŒâ€ŒØ³Ø§Ø²Ø¯ØŸ", answer: "Ø¢Ø¨ÛŒ" },
            { question: "Ø­Ø±Ú©Øª Ø§Ù„Ú©ØªØ±ÙˆÙ† Ø§Ø² Ù„Ø§ÛŒÙ‡ Û´ Ø¨Ù‡ Ù„Ø§ÛŒÙ‡ Û² Ú†Ù‡ Ø±Ù†Ú¯ÛŒ Ù…ÛŒâ€ŒØ³Ø§Ø²Ø¯ØŸ", answer: "Ø³Ø¨Ø²" },
            { question: "Ø­Ø±Ú©Øª Ø§Ù„Ú©ØªØ±ÙˆÙ† Ø§Ø² Ù„Ø§ÛŒÙ‡ Û³ Ø¨Ù‡ Ù„Ø§ÛŒÙ‡ Û² Ú†Ù‡ Ø±Ù†Ú¯ÛŒ Ù…ÛŒâ€ŒØ³Ø§Ø²Ø¯ØŸ", answer: "Ù‚Ø±Ù…Ø²" },
            { question: "Ú©Ø¯Ø§Ù… Ø§ÛŒØ²ÙˆØªÙˆÙ¾ Ø§ÙˆØ±Ø§Ù†ÛŒÙˆÙ… Ø¯Ø± Ø±Ø§Ú©ØªÙˆØ±Ù‡Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŸ", answer: "Ø§ÙˆØ±Ø§Ù†ÛŒÙˆÙ… Û²Û³Ûµ" },
            { question: "Ø¯Ø±ØµØ¯ ÙØ±Ø§ÙˆØ§Ù†ÛŒ Ø§ÙˆØ±Ø§Ù†ÛŒÙˆÙ… Û²Û³Ûµ Ø¯Ø± Ø¬Ø±Ù… Ø·Ø¨ÛŒØ¹ÛŒ Ú†Ù‚Ø¯Ø± Ø§Ø³ØªØŸ", answer: "Ú©Ù…ØªØ± Ø§Ø² Û°.Û· Ø¯Ø±ØµØ¯" },
            { question: "Ú†Ù†Ø¯ Ø¹Ù†ØµØ± Ø³Ø§Ø®ØªÚ¯ÛŒ Ùˆ Ú†Ù†Ø¯ Ø¹Ù†ØµØ± Ø·Ø¨ÛŒØ¹ÛŒ Ø¯Ø§Ø±ÛŒÙ…ØŸ", answer: "Û²Û¶ Ø¹Ù†ØµØ± Ø³Ø§Ø®ØªÚ¯ÛŒ Ùˆ Û¹Û² Ø·Ø¨ÛŒØ¹ÛŒ" },
            { question: "Ù†Ø§Ù… Ø­Ù„Ø§Ù„ Ø±Ù†Ú¯ Ú†ÛŒØ³ØªØŸ", answer: "Ù‡Ú¯Ø²Ø§Ù†" },
            { question: "Ù‡ÛŒØ¯Ø±ÙˆÚ˜Ù† Ø¨Ø§ Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ú†Ù‡ Ø¹Ù†Ø§ØµØ±ÛŒ Ù¾ÛŒÙˆÙ†Ø¯ Ù‡ÛŒØ¯Ø±ÙˆÚ˜Ù†ÛŒ Ù…ÛŒâ€ŒØ³Ø§Ø²Ø¯ØŸ", answer: "F, N, O" },
            { question: "ÛŒÙˆÙ† Ù‡ÛŒØ¯Ø±ÙˆÚ©Ø³ÛŒØ¯ (HO) Ú†Ù†Ø¯ Ø¨Ø§Ø± Ù…Ù†ÙÛŒ Ø¯Ø§Ø±Ø¯ØŸ", answer: "ÛŒÚ© Ø¨Ø§Ø± Ù…Ù†ÙÛŒ" },
            { question: "ÛŒÙˆÙ† Ø¢Ù…ÙˆÙ†ÛŒÙˆÙ… (NH<sub>4</sub>) Ú†Ù†Ø¯ Ø¨Ø§Ø± Ù…Ø«Ø¨Øª Ø¯Ø§Ø±Ø¯ØŸ", answer: "ÛŒÚ© Ø¨Ø§Ø± Ù…Ø«Ø¨Øª" },
            { question: "ÛŒÙˆÙ† Ù…Ù†Ú¯Ù†Ø§Øª (MnO<sub>4</sub>) Ú†Ù†Ø¯ Ø¨Ø§Ø± Ù…Ù†ÙÛŒ Ø¯Ø§Ø±Ø¯ØŸ", answer: "Ø¯Ùˆ Ø¨Ø§Ø± Ù…Ù†ÙÛŒ" },
            { question: "ÛŒÙˆÙ† Ù¾Ø±Ù…Ù†Ú¯Ù†Ø§Øª (MnO<sub>4</sub>) Ú†Ù†Ø¯ Ø¨Ø§Ø± Ù…Ù†ÙÛŒ Ø¯Ø§Ø±Ø¯ØŸ", answer: "ÛŒÚ© Ø¨Ø§Ø± Ù…Ù†ÙÛŒ" },
            { question: "ÛŒÙˆÙ† Ú©Ø±Ø¨Ù†Ø§Øª (CO<sub>3</sub>) Ú†Ù†Ø¯ Ø¨Ø§Ø± Ù…Ù†ÙÛŒ Ø¯Ø§Ø±Ø¯ØŸ", answer: "Ø¯Ùˆ Ø¨Ø§Ø± Ù…Ù†ÙÛŒ" },
            { question: "ÛŒÙˆÙ† Ø³ÙˆÙ„ÙØ§Øª (SO<sub>4</sub>) Ú†Ù†Ø¯ Ø¨Ø§Ø± Ù…Ù†ÙÛŒ Ø¯Ø§Ø±Ø¯ØŸ", answer: "Ø¯Ùˆ Ø¨Ø§Ø± Ù…Ù†ÙÛŒ" },
            { question: "ÛŒÙˆÙ† Ù†ÛŒØªØ±Ø§Øª (NO<sub>3</sub>) Ú†Ù†Ø¯ Ø¨Ø§Ø± Ù…Ù†ÙÛŒ Ø¯Ø§Ø±Ø¯ØŸ", answer: "ÛŒÚ© Ø¨Ø§Ø± Ù…Ù†ÙÛŒ" },
            { question: "Ù…Ø±Ø§Ø­Ù„ ØªÙ‡ÛŒÙ‡ Ù…Ù†ÛŒØ²ÛŒÙ… Ø§Ø² Ø¢Ø¨ Ø±Ø§ Ø´Ø±Ø­ Ø¯Ù‡ÛŒØ¯.", answer: "Ø¨Ø±Ø§ÛŒ ØªÙ‡ÛŒÙ‡ Ù…Ù†ÛŒØ²ÛŒÙ… Ø§Ø² Ø¢Ø¨ØŒ Ø§Ø¨ØªØ¯Ø§ Ø¨Ù‡ Ø¢Ù† Ù‡ÛŒØ¯Ø±ÙˆÚ©Ø³ÛŒØ¯ (HO<sup>-</sup>) Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… ØªØ§ Ø¨Ù‡ ØµÙˆØ±Øª Mg(OH)<sub>2</sub> Ø¯Ø±Ø¨ÛŒØ§ÛŒØ¯ Ú©Ù‡ Ù†Ø§Ù…Ø­Ù„ÙˆÙ„ Ø§Ø³Øª. Ø³Ù¾Ø³ Ø¨Ù‡ Ø¢Ù† Ù‡ÛŒØ¯Ø±ÙˆÚ©Ù„Ø±ÛŒÚ© Ø§Ø³ÛŒØ¯ Ù…ÛŒâ€ŒØ²Ù†ÛŒÙ… ØªØ§ Ù†Ù…Ú©ÛŒ Ù…Ø­Ù„ÙˆÙ„ Ø¯Ø± Ø¢Ø¨ Ø¨Ù‡ Ø¯Ø³Øª Ø¢ÛŒØ¯. Ø¯Ø± Ù†Ù‡Ø§ÛŒØªØŒ Ø¨Ø§ Ø¹Ø¨ÙˆØ± Ø¬Ø±ÛŒØ§Ù† Ø¨Ø±Ù‚ (Ø§Ù„Ú©ØªØ±ÙˆÙ„ÛŒØ²)ØŒ Ø¢Ù† Ø±Ø§ Ø§Ø² Ú©Ù„Ø± Ø¬Ø¯Ø§ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…." }
        ];

        let availableQuestions = [...qaPairs]; // Copy of all questions
        let askedQuestionsCount = 0;
        let currentQuestion = null;

        const questionDisplay = document.getElementById('questionDisplay');
        const answerInput = document.getElementById('answerInput');
        const feedbackDisplay = document.getElementById('feedbackDisplay');
        const correctAnswerDisplay = document.getElementById('correctAnswerDisplay');
        const checkAnswerBtn = document.getElementById('checkAnswer');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const progressBar = document.getElementById('progressBar');

        // Function to normalize strings for comparison (remove extra spaces, convert to lowercase)
        function normalizeString(str) {
            // Replace various spaces/newlines with a single space, trim, and convert to lowercase
            return str.replace(/\s+/g, ' ').trim().toLowerCase();
        }

        function displayNextQuestion() {
            if (availableQuestions.length === 0) {
                questionDisplay.innerHTML = 'ØªÙ…Ø§Ù… Ø³ÙˆØ§Ù„Ø§Øª Ù¾Ø§Ø³Ø® Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù†Ø¯! ğŸ¥³';
                answerInput.style.display = 'none';
                checkAnswerBtn.style.display = 'none';
                nextQuestionBtn.textContent = 'Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯ Ø¢Ø²Ù…ÙˆÙ†';
                feedbackDisplay.innerHTML = '';
                correctAnswerDisplay.style.display = 'none';
                return;
            }

            const randomIndex = Math.floor(Math.random() * availableQuestions.length);
            currentQuestion = availableQuestions.splice(randomIndex, 1)[0]; // Remove question from available
            
            questionDisplay.innerHTML = currentQuestion.question;
            answerInput.value = ''; // Clear previous input
            answerInput.style.display = 'block';
            feedbackDisplay.innerHTML = ''; // Clear feedback
            correctAnswerDisplay.style.display = 'none'; // Hide correct answer
            checkAnswerBtn.disabled = false; // Enable check button
            nextQuestionBtn.disabled = true; // Disable next button until checked
            answerInput.focus(); // Focus on the input field

            updateProgressBar();
        }

        function checkAnswer() {
            const userAnswer = normalizeString(answerInput.value);
            // We need to normalize the stored answer only when comparing it.
            // Some answers contain HTML tags like <sub> or equations, so we can't just call .textContent
            // We'll create a temporary div to get the plain text if it's not a simple string.
            let correctAnswerNormalized;
            if (currentQuestion.answer.includes('<')) { // Check if it likely contains HTML
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = currentQuestion.answer;
                correctAnswerNormalized = normalizeString(tempDiv.textContent);
            } else {
                correctAnswerNormalized = normalizeString(currentQuestion.answer);
            }

            if (userAnswer === correctAnswerNormalized) {
                feedbackDisplay.innerHTML = 'Ø¯Ø±Ø³Øª Ø¨ÙˆØ¯! âœ…';
                feedbackDisplay.className = 'feedback correct';
                correctAnswerDisplay.style.display = 'none';
                askedQuestionsCount++; // Increment count only on correct answer
                // Automatically move to next question if correct, or enable button
                nextQuestionBtn.disabled = false; 
                checkAnswerBtn.disabled = true; // Disable check after correct answer
                answerInput.disabled = true; // Disable input after correct answer
            } else {
                feedbackDisplay.innerHTML = 'Ø§Ø´ØªØ¨Ø§Ù‡ Ø¨ÙˆØ¯. âŒ';
                feedbackDisplay.className = 'feedback incorrect';
                correctAnswerDisplay.innerHTML = 'Ù¾Ø§Ø³Ø® ØµØ­ÛŒØ­: ' + currentQuestion.answer;
                correctAnswerDisplay.style.display = 'block';
                checkAnswerBtn.disabled = true; // Disable check after incorrect answer
                nextQuestionBtn.disabled = false; // Enable next to allow skipping
                answerInput.disabled = true; // Disable input after incorrect answer
            }
            updateProgressBar();
        }

        function updateProgressBar() {
            const totalQuestions = qaPairs.length;
            const progress = ((totalQuestions - availableQuestions.length) / totalQuestions) * 100;
            progressBar.style.width = progress + '%';
            progressBar.textContent = Math.round(progress) + '%';

            if (availableQuestions.length === 0) {
                progressBar.textContent = 'Û±Û°Û°%';
                progressBar.style.width = '100%';
            }
        }

        // Event Listeners
        checkAnswerBtn.addEventListener('click', checkAnswer);
        nextQuestionBtn.addEventListener('click', () => {
            if (availableQuestions.length === 0 && nextQuestionBtn.textContent === 'Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯ Ø¢Ø²Ù…ÙˆÙ†') {
                // Reset quiz
                availableQuestions = [...qaPairs];
                askedQuestionsCount = 0;
                answerInput.style.display = 'block';
                checkAnswerBtn.style.display = 'inline-block';
                nextQuestionBtn.textContent = 'Ø³ÙˆØ§Ù„ Ø¨Ø¹Ø¯ÛŒ';
                answerInput.disabled = false;
                displayNextQuestion();
            } else {
                answerInput.disabled = false; // Enable input for new question
                displayNextQuestion();
            }
        });

        // Allow pressing Enter to check answer
        answerInput.addEventListener('keypress', function(event) {
            if (event.key === 'Enter' && !checkAnswerBtn.disabled) {
                checkAnswer();
            }
        });

        // Initial load
        displayNextQuestion();
    </script>
</body>
</html>
